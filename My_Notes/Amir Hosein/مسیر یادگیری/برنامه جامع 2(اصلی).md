## 🎓 درس اول: مبانی پایگاه داده رابطه‌ای

### 🧩 بخش اول: مدل رابطه‌ای و ساختار جدول

### 📌 ایده اصلی

مدل رابطه‌ای یعنی ما داده‌ها رو به شکل جدول‌هایی ذخیره می‌کنیم که هر جدول مثل یک فایل اکسله:

- **سطرها** (Rows): هر سطر یک رکورد یا نمونه از داده‌ست (مثلاً اطلاعات یک دانشجو).
    
- **ستون‌ها** (Columns): هر ستون یک ویژگی یا مشخصه از اون رکورده (مثلاً نام، سن، رشته).
    
- **دامنه (Domain)**: نوع داده‌ای که هر ستون می‌تونه داشته باشه (مثلاً عدد، متن، تاریخ).
    

### 🧠 مثال تصویری

فرض کن یه جدول داریم به اسم `Students`:

|StudentID|Name|Age|Major|
|---|---|---|---|
|101|Sara|22|Computer|
|102|Amir|24|Physics|
|103|Niloofar|21|Literature|

- هر **سطر** اطلاعات یک دانشجو رو نشون می‌ده.
    
- هر **ستون** یک ویژگی از دانشجوهاست.
    
- ستون `Age` فقط عدد می‌گیره، پس دامنه‌اش عددیه.
    

### 🔍 چرا این مدل مهمه؟

- ساده، قابل فهم و قابل پیاده‌سازی در اکثر نرم‌افزارهاست.
    
- پایه‌ی تمام سیستم‌های بانک اطلاعاتی مثل MySQL، PostgreSQL، SQL Server و Oracle همینه.
    
- باعث می‌شه داده‌ها منظم، قابل جستجو و قابل تحلیل باشن.
    

### 🧪 سوالات درک مطلب (بیا با هم تمرین کنیم!)

1. در مدل رابطه‌ای، تفاوت بین سطر و ستون چیه؟
    
2. جدول `Books` شامل ستون‌های `Title`, `Author`, `YearPublished` هست. دامنه‌ی ستون `YearPublished` چی می‌تونه باشه؟
    
3. چرا استفاده از جدول برای ذخیره داده‌ها بهتر از ذخیره‌ی داده‌ها در فایل‌های متنی ساده‌ست؟
    
## 🔑 بخش دوم: انواع کلیدها (Primary, Foreign, Candidate, Super, Alternate)

### 📌 چرا کلیدها مهم‌اند؟

کلیدها مثل شناسنامه‌های داده‌ها هستن. کمک می‌کنن هر رکورد (سطر) در جدول قابل شناسایی باشه و ارتباط بین جدول‌ها برقرار بشه. بدون کلیدها، پایگاه داده مثل یک انبوهه بی‌نظم از اطلاعاته.

### 🧠 انواع کلیدها با مثال ساده

#### 1. **Primary Key (کلید اصلی)**

- هر جدول باید یک کلید اصلی داشته باشه.
    
- این کلید **منحصربه‌فرد** و **غیر تهی**ه.
    
- مثال: در جدول `Students`، ستون `StudentID` می‌تونه کلید اصلی باشه چون هیچ دو دانشجویی شناسه یکسان نداره.
    

#### 2. **Foreign Key (کلید خارجی)**

- برای **برقراری ارتباط** بین دو جدول استفاده می‌شه.
    
- کلید خارجی به کلید اصلی جدول دیگه اشاره می‌کنه.
    
- مثال: جدول `Enrollments` که ثبت‌نام دانشجوها در درس‌ها رو نگه می‌داره، ممکنه ستونی به نام `StudentID` داشته باشه که کلید خارجی باشه و به `Students(StudentID)` اشاره کنه.
    

#### 3. **Candidate Key (کلید کاندیدا)**

- هر ستون یا ترکیبی از ستون‌ها که بتونه رکوردها رو منحصربه‌فرد کنه، یک کاندیداست.
    
- از بین این‌ها یکی انتخاب می‌شه و می‌شه کلید اصلی.
    
- مثال: اگر جدول `Employees` هم `NationalID` و هم `EmployeeID` داشته باشه، هر دو می‌تونن Candidate Key باشن.
    

#### 4. **Alternate Key (کلید جایگزین)**

- کلیدهای کاندیدایی که انتخاب نشدن.
    
- مثال: اگر `EmployeeID` به عنوان Primary Key انتخاب بشه، `NationalID` می‌شه Alternate Key.
    

#### 5. **Super Key (کلید فوق)**

- هر مجموعه‌ای از ستون‌ها که بتونه رکوردها رو منحصربه‌فرد کنه.
    
- Candidate Keyها زیرمجموعه‌ای از Super Keyها هستن.
    
- مثال: ترکیب `StudentID + Name` هم می‌تونه یک Super Key باشه، ولی چون `StudentID` به تنهایی کافی‌ست، اون ترکیب اضافیه.
    

### 🧪 سوالات درک مطلب

1. تفاوت بین Primary Key و Candidate Key چیه؟
    
2. چرا Foreign Key برای ارتباط بین جدول‌ها ضروریه؟
    
3. در جدول `Books` با ستون‌های `ISBN`, `Title`, `Author`، کدوم ستون می‌تونه Primary Key باشه؟ چرا؟
    
4. آیا ممکنه یک جدول چند Candidate Key داشته باشه؟ مثال بزن.
## 🧱 بخش سوم: جامعیت داده‌ها و انواع آن

### 📌 جامعیت یعنی چی؟

جامعیت داده‌ها (Data Integrity) یعنی مطمئن باشیم داده‌هایی که وارد پایگاه داده می‌شن:

- **درست، معتبر و قابل اعتماد** هستن.
    
- با **قوانین مشخص** کنترل می‌شن تا اشتباه وارد نشه.
    
- به صورت **سازگار** بین جدول‌ها باقی بمونن.
    

### 🧠 انواع جامعیت داده‌ها با مثال

#### 1. **جامعیت موجودیتی (Entity Integrity)**

- قانون: هیچ رکوردی نباید کلید اصلی (Primary Key) خالی داشته باشه.
    
- دلیل: چون کلید اصلی باید رکورد رو منحصربه‌فرد کنه.
    
- مثال: جدول `Students` نباید دانشجویی با `StudentID = NULL` داشته باشه.
    

#### 2. **جامعیت ارجاعی (Referential Integrity)**

- قانون: کلید خارجی باید به رکوردی واقعی در جدول مرجع اشاره کنه.
    
- دلیل: نمی‌خوایم داده‌ای داشته باشیم که به چیزی اشاره کنه که وجود نداره.
    
- مثال: اگر جدول `Enrollments` شامل `StudentID = 999` باشه ولی جدول `Students` چنین شناسه‌ای نداشته باشه، این نقض جامعیت ارجاعیه.
    

#### 3. **جامعیت دامنه (Domain Integrity)**

- قانون: هر ستون فقط باید داده‌ای از نوع مشخص خودش بگیره.
    
- مثال: ستون `Age` باید فقط عدد باشه، نه متن مثل "بیست و پنج".
    

#### 4. **قواعد کاربری (User-defined Integrity)**

- قانون: قواعد خاصی که خودمون تعریف می‌کنیم.
    
- مثال: ستون `Grade` فقط باید یکی از مقادیر A, B, C, D, F باشه.
    

### 🔐 چرا جامعیت مهمه؟

- جلوی ورود داده‌های اشتباه یا ناقص رو می‌گیره.
    
- باعث می‌شه پایگاه داده قابل اعتماد باشه.
    
- در سیستم‌های حساس مثل بانکداری، سلامت، رزرو بلیت و... حیاتی‌ه.
    

### 🧪 سوالات درک مطلب

1. اگر در جدول `Students` مقدار `StudentID` برای یک رکورد برابر NULL باشه، چه نوع جامعیتی نقض شده؟
    
2. چرا جامعیت ارجاعی برای ارتباط بین جدول‌ها مهمه؟
    
3. اگر در ستون `Age` مقدار "بیست و پنج" وارد بشه، کدوم نوع جامعیت نقض شده؟
    
4. یک مثال از قانون کاربری دلخواه برای جدول `Courses` بده.
## 🧩 بخش چهارم: افزونگی داده و یکپارچگی اطلاعات

### 📌 افزونگی یعنی چی؟

افزونگی (Redundancy) یعنی **تکرار بی‌دلیل داده‌ها** در جدول یا بین جدول‌ها. این تکرار باعث می‌شه:

- حجم پایگاه داده زیاد بشه.
    
- احتمال اشتباه بالا بره (مثلاً تغییر یک مقدار در یک جا ولی فراموش کردن تغییرش در جای دیگه).
    
- نگهداری و به‌روزرسانی سخت بشه.
    

### 🧠 مثال ساده از افزونگی

فرض کن جدول `Students` این شکلی باشه:

|StudentID|Name|Major|MajorAdvisor|
|---|---|---|---|
|101|Sara|Computer|Dr. Ahmadi|
|102|Amir|Computer|Dr. Ahmadi|
|103|Nilo|Physics|Dr. Moradi|

اینجا اسم مشاور (`MajorAdvisor`) برای رشته‌ی کامپیوتر چند بار تکرار شده. اگه یه روز اسم مشاور عوض بشه، باید توی همه رکوردها تغییرش بدیم. این یعنی افزونگی.

### 🔗 یکپارچگی اطلاعات یعنی چی؟

یکپارچگی (Consistency) یعنی داده‌ها در همه جا **هماهنگ و درست** باشن. اگر افزونگی زیاد باشه، احتمال از بین رفتن یکپارچگی هم زیاد می‌شه.

### ✅ راه‌حل چیه؟

- **طراحی درست جدول‌ها** با استفاده از روابط بین جدول‌ها.
    
- **نرمال‌سازی**: تقسیم جدول‌های بزرگ به جدول‌های کوچکتر با ارتباط منطقی.
    
- استفاده از **کلید خارجی** برای اتصال جدول‌ها به هم.
    

### 🧪 سوالات درک مطلب

1. افزونگی داده چه مشکلی ایجاد می‌کنه؟
    
2. در مثال بالا، چرا تکرار اسم مشاور مشکل‌سازه؟
    
3. یکپارچگی اطلاعات یعنی چی؟
    
4. چطور می‌تونیم افزونگی رو کاهش بدیم؟
## 🧮 بخش پنجم: مقایسه جدول در مدل رابطه‌ای و مدل هموار

### 📌 مدل رابطه‌ای چطور جدول‌ها رو تعریف می‌کنه؟

در مدل رابطه‌ای:

- داده‌ها در **چند جدول مرتبط** ذخیره می‌شن.
    
- هر جدول فقط اطلاعات مربوط به یک موجودیت رو نگه می‌داره (مثلاً جدول دانشجو، جدول درس).
    
- ارتباط بین جدول‌ها با **کلید خارجی** انجام می‌شه.
    
- هدف: جلوگیری از افزونگی، حفظ یکپارچگی، و امکان جستجوی سریع.
    

### 📦 مدل هموار چیه؟

در مدل هموار (Flat Model):

- همه داده‌ها در **یک جدول بزرگ** ذخیره می‌شن.
    
- هیچ ارتباطی بین جدول‌ها نیست چون فقط یک جدول وجود داره.
    
- داده‌ها ممکنه بارها تکرار بشن.
    
- مثال: جدول زیر اطلاعات دانشجو و درس رو با هم نگه می‌داره:
    

|StudentID|Name|CourseName|Instructor|
|---|---|---|---|
|101|Sara|Math|Dr. Amini|
|101|Sara|Physics|Dr. Moradi|
|102|Amir|Math|Dr. Amini|

اینجا اطلاعات دانشجو (`Sara`) چند بار تکرار شده چون همه چیز در یک جدوله.

### ⚖️ مقایسه سریع

|ویژگی|مدل رابطه‌ای|مدل هموار|
|---|---|---|
|ساختار|چند جدول مرتبط|یک جدول بزرگ|
|تکرار داده|کم|زیاد|
|نگهداری و تغییر|آسان و دقیق|سخت و پرخطا|
|سرعت جستجو|بالا با ایندکس|کند در داده‌های بزرگ|
|کاربرد|سیستم‌های واقعی|فایل‌های ساده یا موقتی|

### 🧪 سوالات درک مطلب

1. چرا مدل رابطه‌ای از چند جدول استفاده می‌کنه؟
    
2. در مدل هموار، چه مشکلی ممکنه با تکرار داده‌ها پیش بیاد؟
    
3. اگر بخوای اطلاعات دانشجوها و درس‌ها رو ذخیره کنی، کدوم مدل بهتره؟ چرا؟
    
4. تفاوت اصلی بین مدل رابطه‌ای و مدل هموار چیه؟
